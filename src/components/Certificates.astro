---
const certificates = [
  {
    title: "Front-End and Back-End Developer Training",
    issuer: "Badan Pariwisata dan Ekonomi Kreatif Republik Indonesia",
    year: "2024",
    logo: "public/Baparekraf.svg",
    link: "public/file/BaparekrafTraining.pdf",
  },
  {
    title: "Becoming an Expert Front-End Web Developer",
    issuer: "Dicoding",
    year: "2024",
    logo: "public/Dicoding.svg",
    link: "public/file/DicodingFile1.pdf",
  },
  {
    title: "Learning to Build Back-End Applications for Beginners",
    issuer: "Dicoding",
    year: "2024",
    logo: "public/Dicoding.svg",
    link: "public/file/DicodingFile2.pdf",
  },
];
---

<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  {certificates.map(cert => (
    <button
      type="button"
      class="cert-btn group relative p-6 rounded-2xl overflow-hidden
             bg-white/70 dark:bg-[#0a0a0a]/70
             backdrop-blur-xl border border-[#0f7095]/20
             shadow-[0_4px_20px_rgba(0,0,0,0.05)]
             hover:shadow-[0_6px_30px_rgba(15,112,149,0.25)]
             hover:border-[#0f7095]/40
             transition-all duration-500 hover:-translate-y-[3px]"
      data-link={cert.link}
    >
      <!-- Gradient Accent -->
      <div class="absolute inset-0 bg-gradient-to-br from-[#0f7095]/10 via-transparent to-[#74c0d9]/10
                  opacity-0 group-hover:opacity-100 transition-opacity duration-700 rounded-2xl"></div>

      <!-- Logo & Title -->
      <div class="relative flex items-center gap-2 mb-4">
        <img
          src={cert.logo}
          alt={`${cert.issuer} logo`}
          class="w-8 h-8 object-contain rounded-md bg-white/60 dark:bg-white/10 p-1
                 ring-1 ring-[#0f7095]/30 shadow-sm transition-transform duration-300
                 group-hover:scale-105"
        />
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200
                   transition-colors duration-300 group-hover:text-[#0f7095]">
          {cert.title}
        </h3>
      </div>

      <p class="text-sm text-gray-600 dark:text-gray-400 relative z-10">{cert.issuer}</p>
      <p class="text-xs text-gray-400 mt-1 relative z-10">{cert.year}</p>

      <!-- Accent line -->
      <div class="mt-4 w-16 h-[2px] bg-[#0f7095] rounded-full group-hover:w-24 transition-all duration-500"></div>
    </button>
  ))}
</div>

<!-- Modal -->
<div id="modal" class="fixed inset-0 bg-black/50 items-center justify-center z-50" style="display: none;">
  <div class="bg-white dark:bg-[#0a0a0a] rounded-xl p-6 max-w-xl w-full relative">
    <button
      id="close-modal"
      class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 dark:hover:text-white text-2xl font-bold"
    >
      âœ•
    </button>
    <iframe
      id="modal-iframe"
      src=""
      class="w-full h-[400px] border rounded-lg"
      frameborder="0"
    ></iframe>
  </div>
</div>

<script>
  const modal = document.getElementById('modal') as HTMLDivElement;
  const iframe = document.getElementById('modal-iframe') as HTMLIFrameElement;
  const closeBtn = document.getElementById('close-modal') as HTMLButtonElement;

  if (modal && iframe && closeBtn) {
    document.querySelectorAll('.cert-btn').forEach((btn: Element) => {
      btn.addEventListener('click', () => {
        iframe.src = (btn as HTMLButtonElement).dataset.link || '';
        modal.style.display = 'flex';
      });
    });

    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      iframe.src = '';
    });
  }
</script>

<style is:global>
  /* Entry Animation */
  .grid button {
    animation: fadeCardUp 0.8s ease-out both;
  }

  @keyframes fadeCardUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Dark Mode */
  html.dark .grid button {
    background: rgba(10, 10, 10, 0.6);
    border-color: rgba(15, 112, 149, 0.25);
  }

  html.dark .grid button:hover {
    background: rgba(15, 112, 149, 0.1);
  }

  /* Responsive tweaks */
  @media (max-width: 640px) {
    .grid button { padding: 1rem; }
    .grid h3 { font-size: 1rem; }
    .grid p { font-size: 0.9rem; }
  }
</style>
