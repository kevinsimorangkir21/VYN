---
import { ArrowLeft, ArrowRight } from "lucide-astro";

const certificates = [
  {
    title: "Front-End and Back-End Developer Training",
    issuer: "Badan Pariwisata dan Ekonomi Kreatif Republik Indonesia",
    year: "2024",
    logo: "/Baparekraf.svg",
    link: "/file/BaparekrafTraining.pdf",
  },
  {
    title: "Becoming an Expert Front-End Web Developer",
    issuer: "Dicoding",
    year: "2024",
    logo: "/Dicoding.svg",
    link: "/file/DicodingFile1.pdf",
  },
  {
    title: "Learning to Build Back-End Applications for Beginners",
    issuer: "Dicoding",
    year: "2024",
    logo: "/Dicoding.svg",
    link: "/file/DicodingFile2.pdf",
  },
];
---

<div class="relative w-full group">
  <section
    id="cert-scroll"
    aria-label="Certificates"
    class="flex gap-6 overflow-x-auto pb-4 scroll-smooth snap-x snap-mandatory"
  >
    {
      certificates.map((cert) => (
        <div
          class="snap-start min-w-[360px] sm:min-w-[400px] lg:min-w-[440px] group relative p-6 rounded-2xl overflow-hidden
               bg-white/70 dark:bg-[hsl(var(--brand-h)_24%_13%_/_0.65)]
               backdrop-blur-xl border border-[hsl(var(--brand-h)_50%_50%_/_0.18)]
               shadow-[0_4px_20px_hsl(210_30%_10%_/_0.08)]
               hover:shadow-[0_10px_28px_hsl(var(--brand-h)_60%_20%_/_0.14)]
               transition-all duration-400"
        >
          <div
            class="pointer-events-none absolute inset-0 rounded-2xl opacity-0
                 bg-gradient-to-br from-[hsl(var(--brand-h)_60%_40%_/_0.10)]
                 via-transparent to-[hsl(var(--brand-h)_60%_40%_/_0.08)]
                 group-hover:opacity-100 transition-opacity duration-500"
          />

          <div class="relative flex items-center gap-3 mb-4">
            <img
              src={cert.logo}
              alt={`${cert.issuer} logo`}
              width="32"
              height="32"
              loading="lazy"
              class="w-8 h-8 object-contain rounded-md
                   bg-white/70 dark:bg-white/5 p-1
                   ring-1 ring-[hsl(var(--brand-h)_60%_40%_/_0.28)]
                   shadow-[0_2px_6px_hsl(210_30%_10%_/_0.08)]
                   transition-transform duration-300 group-hover:scale-[1.03]"
            />
            <h3
              class="text-base md:text-lg font-semibold text-gray-800 dark:text-gray-100
                   transition-colors duration-300
                   group-hover:text-[hsl(var(--brand-h)_60%_40%)]"
            >
              {cert.title}
            </h3>
          </div>

          <p class="text-sm text-gray-600 dark:text-gray-400">{cert.issuer}</p>
          <p class="text-xs text-gray-400 mt-1">{cert.year}</p>

          <div
            class="mt-4 h-px w-full bg-gradient-to-r
                 from-transparent via-[hsl(var(--brand-h)_30%_60%_/_0.25)] to-transparent"
          />

          <div class="mt-4 flex items-center justify-between">
            <span class="text-xs text-gray-500 dark:text-gray-400">
              PDF â€¢ {cert.year}
            </span>

            <a
              href={cert.link}
              target="_blank"
              rel="noopener"
              class="inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium
                   bg-[linear-gradient(120deg,var(--brand-400),var(--brand-500))]
                   text-white shadow-[0_4px_14px_hsl(var(--brand-h)_60%_20%_/_0.18)]
                   hover:shadow-[0_8px_24px_hsl(var(--brand-h)_60%_20%_/_0.24)]
                   transition-all duration-300"
            >
              Open PDF
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="size-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path
                  d="M7 17L17 7M7 7h10v10"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </a>
          </div>
        </div>
      ))
    }
  </section>

  {/* arrow left */}
  <button
    type="button"
    class="hidden md:flex opacity-90 hover:opacity-100 hover:scale-110 transition-all duration-300
           items-center justify-center absolute left-0 top-1/2 -translate-y-1/2
           bg-white/70 dark:bg-black/30 backdrop-blur-xl size-10 rounded-full border border-white/20 shadow"
    onclick="document.getElementById('cert-scroll').scrollBy({ left: -350, behavior: 'smooth' })"
  >
    <ArrowLeft class="size-5" />
  </button>

  {/* arrow right */}
  <button
    type="button"
    class="hidden md:flex opacity-90 hover:opacity-100 hover:scale-110 transition-all duration-300
           items-center justify-center absolute right-0 top-1/2 -translate-y-1/2
           bg-white/70 dark:bg-black/30 backdrop-blur-xl size-10 rounded-full border border-white/20 shadow"
    onclick="document.getElementById('cert-scroll').scrollBy({ left: 350, behavior: 'smooth' })"
  >
    <ArrowRight class="size-5" />
  </button>
</div>

<style is:global>
  [aria-label="Certificates"]::-webkit-scrollbar {
    height: 6px;
  }
  [aria-label="Certificates"]::-webkit-scrollbar-thumb {
    background: hsl(var(--brand-h) 60% 40%);
    border-radius: 9999px;
  }

  [aria-label="Certificates"] > div {
    animation: kvnsCardIn 0.6s cubic-bezier(0.2, 0.6, 0.2, 1) both;
  }
  @keyframes kvnsCardIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
