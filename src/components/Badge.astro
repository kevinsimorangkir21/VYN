---
/**
 * KVNS Design System V5 â€” Badge Component
 * Brand: var(--brand-h) var(--brand-s) var(--brand-l)
 */
---

<div class="kvns-badge-wrapper flex items-center justify-center">
  <span class="relative inline-flex overflow-hidden rounded-full p-[1.5px]">
    <!-- Border Glow Conic -->
    <span
      class="absolute inset-[-150%] animate-[kvnsSpin_8s_linear_infinite]
        bg-[conic-gradient(from_0deg_at_50%_50%,hsl(var(--brand-h)_68%_38%)_0%,hsl(var(--brand-h)_60%_70%)_40%,hsl(var(--brand-h)_68%_38%)_80%,hsl(var(--brand-h)_68%_38%)_100%)]
        opacity-[.40] dark:opacity-[.30] blur-[0.5px]"
    ></span>

    <!-- Core -->
    <div
      id="badge-core"
      class="inline-flex items-center justify-center px-4 py-1.5 text-sm font-semibold
        text-[hsl(var(--brand-h)_60%_34%)] dark:text-[hsl(var(--brand-h)_70%_82%)]
        bg-white/70 dark:bg-[hsl(var(--brand-h)_24%_13%_/_0.90)]
        rounded-full cursor-default whitespace-nowrap
        backdrop-blur-xl border border-[hsl(var(--brand-h)_50%_50%_/_0.28)]
        shadow-[0_0_10px_hsl(var(--brand-h)_40%_30%_/_0.08)]
        transition-all duration-400 ease-out
        hover:scale-[1.04] hover:shadow-[0_0_22px_hsl(var(--brand-h)_60%_20%_/_0.18)]"
    >
      <slot />
    </div>
  </span>
</div>

<script>
  document.addEventListener("astro:page-load", () => {
    const badge = document.getElementById("badge-core");
    if (!badge) return;

    badge.addEventListener("mousemove", (e) => {
      const rect = badge.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      badge.style.background = `radial-gradient(circle at ${x}px ${y}px, hsl(var(--brand-h)_60%_40%_/_0.20), transparent 70%)`;
    });
    badge.addEventListener("mouseleave", () => {
      badge.style.background = "";
    });
  });
</script>

<style is:global>
  @keyframes kvnsSpin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  /* reduced motion safety */
  @media (prefers-reduced-motion: reduce) {
    [class*="kvnsSpin"] {
      animation: none !important;
    }
  }

  @keyframes kvnsBadgeIn {
    0% {
      opacity: 0;
      transform: translateY(10px) scale(0.97);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  .kvns-badge-wrapper {
    animation: kvnsBadgeIn 0.7s var(--ease) both;
  }
</style>
