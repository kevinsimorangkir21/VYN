---
export const prerender = true;
---

<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🚧 Website Maintenance</title>
  </head>
  <body class="bg-slate-900 text-slate-50 flex items-center justify-center h-screen">
    <main class="text-center max-w-lg p-6 space-y-6">

      <!-- Switcher -->
      <div class="flex justify-center gap-2 mb-4">
        <button data-lang="id" class="lang-btn px-3 py-1 rounded bg-slate-700 hover:bg-slate-600">🇮🇩 ID</button>
        <button data-lang="en" class="lang-btn px-3 py-1 rounded bg-slate-700 hover:bg-slate-600">🇬🇧 EN</button>
        <button data-lang="jp" class="lang-btn px-3 py-1 rounded bg-slate-700 hover:bg-slate-600">🇯🇵 JP</button>
      </div>

      <!-- Ikon -->
      <div class="flex justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" 
             viewBox="0 0 24 24" stroke="currentColor"
             class="w-16 h-16 text-sky-400 animate-spin">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 6V4m0 16v-2m8-6h2M4 12H2m15.364 6.364l1.414 1.414M6.222 6.222L4.808 4.808m12.728 0l1.414 1.414M6.222 17.778l-1.414 1.414"/>
        </svg>
      </div>

      <!-- Judul -->
      <h1 id="title" class="text-4xl font-bold"></h1>

      <!-- Deskripsi -->
      <p id="desc" class="text-lg"></p>

      <!-- Countdown -->
      <div id="countdown" class="text-2xl font-mono text-sky-400">Loading...</div>

      <!-- Progress -->
      <div class="w-full bg-slate-700 rounded-full h-3 overflow-hidden">
        <div class="bg-sky-400 h-3 rounded-full animate-progress"></div>
      </div>

      <!-- Link -->
      <div class="flex justify-center gap-4">
        <a id="contactBtn" href="mailto:support@example.com"
           class="px-4 py-2 rounded-xl bg-sky-500 hover:bg-sky-600 text-white font-medium transition"></a>
        <a id="instagramBtn" href="https://instagram.com/example"
           class="px-4 py-2 rounded-xl bg-slate-700 hover:bg-slate-600 text-slate-100 font-medium transition"></a>
      </div>
    </main>

    <!-- Animasi -->
    <style is:global>
      @keyframes progress { 0%{width:0%}50%{width:70%}100%{width:100%} }
      .animate-progress { animation: progress 3s infinite alternate; }
    </style>

    <!-- Script -->
    <script>
      const translations = {
        id: {
          title: "🚧 Website Sedang Perbaikan",
          desc: "Kami sedang melakukan maintenance sistem untuk meningkatkan layanan.<br/>Silakan kembali lagi nanti 🙏",
          contact: "Hubungi Kami",
          instagram: "Instagram",
          done: "✅ Maintenance selesai!",
        },
        en: {
          title: "🚧 Website Under Maintenance",
          desc: "We are performing system maintenance to improve our service.<br/>Please check back later 🙏",
          contact: "Contact Us",
          instagram: "Instagram",
          done: "✅ Maintenance Completed!",
        },
        jp: {
          title: "🚧 ウェブサイトはメンテナンス中です",
          desc: "システムのメンテナンスを行っております。<br/>しばらくしてから再度アクセスしてください 🙏",
          contact: "お問い合わせ",
          instagram: "インスタグラム",
          done: "✅ メンテナンス完了！",
        }
      };

      let currentLang = "id";

      function setLang(lang) {
        currentLang = lang;
        document.getElementById("title").innerHTML = translations[lang].title;
        document.getElementById("desc").innerHTML = translations[lang].desc;
        document.getElementById("contactBtn").innerText = translations[lang].contact;
        document.getElementById("instagramBtn").innerText = translations[lang].instagram;
      }

      // countdown
      const countdownEl = document.getElementById("countdown");
      const target = new Date("2025-09-10T12:00:00+07:00").getTime();

      function updateCountdown() {
        const now = new Date().getTime();
        const diff = target - now;
        if (diff <= 0) {
          countdownEl.innerHTML = translations[currentLang].done;
          return;
        }
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);

        countdownEl.innerHTML =
          currentLang === "jp"
            ? `${d}日 : ${h}時間 : ${m}分 : ${s}秒`
            : `${d}d : ${h}h : ${m}m : ${s}s`;
      }

      // init
      setLang("id");
      updateCountdown();
      setInterval(updateCountdown, 1000);

      // pasang event listener tombol
      document.querySelectorAll(".lang-btn").forEach(btn => {
        btn.addEventListener("click", e => {
          setLang(e.target.dataset.lang);
          updateCountdown(); // biar langsung update countdown sesuai bahasa
        });
      });
    </script>
  </body>
</html>
