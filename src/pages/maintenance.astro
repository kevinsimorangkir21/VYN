---
export const prerender = true;
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KVNS â€” Maintenance</title>
  </head>

  <body
    class="relative min-h-screen w-screen flex items-center justify-center overflow-hidden
           bg-[#0b0b0b] text-zinc-50"
  >
    <!-- Cinematic teal x gold atmospheres -->
    <div aria-hidden="true" class="pointer-events-none absolute inset-0 -z-10">
      <!-- teal glow top -->
      <div
        class="absolute -top-52 left-1/2 -translate-x-1/2 w-[70vw] max-w-[960px] h-[380px]
               bg-[#0F7095]/22 blur-[110px] rounded-[999px]"
      >
      </div>
      <!-- gold halos sides -->
      <div
        class="absolute -left-40 top-1/4 w-[380px] h-[380px] bg-[#C4B073]/18 blur-[90px] rounded-full"
      >
      </div>
      <div
        class="absolute -right-40 bottom-1/4 w-[420px] h-[420px] bg-[#E6DCA2]/16 blur-[95px] rounded-full"
      >
      </div>
      <!-- faint grid lines -->
      <svg
        class="absolute inset-0 w-full h-full opacity-[0.07]"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <pattern
            id="grid"
            width="40"
            height="40"
            patternUnits="userSpaceOnUse"
          >
            <path
              d="M 40 0 L 0 0 0 40"
              fill="none"
              stroke="#7fc7db"
              stroke-width="0.6"></path>
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#grid)"></rect>
      </svg>
    </div>

    <!-- Card -->
    <main
      class="relative z-10 w-full max-w-lg mx-auto
             rounded-3xl border border-white/5
             bg-white/5 backdrop-blur-xl
             shadow-[0_0_40px_-12px_rgba(15,112,149,.40),inset_0_1px_0_rgba(255,255,255,.06)]
             p-7 sm:p-8 space-y-6"
    >
      <!-- Language Switcher (compact, no navbar) -->
      <div class="flex justify-center gap-2">
        <button
          data-lang="id"
          class="lang-btn px-3 py-1.5 rounded-lg text-sm
                bg-white/5 hover:bg-white/10 border border-white/10 transition"
        >
          ğŸ‡®ğŸ‡© ID
        </button>
        <button
          data-lang="en"
          class="lang-btn px-3 py-1.5 rounded-lg text-sm
                bg-white/5 hover:bg-white/10 border border-white/10 transition"
        >
          ğŸ‡¬ğŸ‡§ EN
        </button>
        <button
          data-lang="jp"
          class="lang-btn px-3 py-1.5 rounded-lg text-sm
                bg-white/5 hover:bg-white/10 border border-white/10 transition"
        >
          ğŸ‡¯ğŸ‡µ JP
        </button>
      </div>

      <!-- Icon -->
      <div class="flex justify-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="url(#kvns-gold)"
          class="w-16 h-16 drop-shadow-[0_0_10px_rgba(230,220,162,0.45)] spin-slower"
        >
          <defs>
            <linearGradient id="kvns-gold" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#C4B073"></stop>
              <stop offset="100%" stop-color="#E6DCA2"></stop>
            </linearGradient>
          </defs>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 6V4m0 16v-2m8-6h2M4 12H2m15.364 6.364l1.414 1.414M6.222 
               6.222L4.808 4.808m12.728 0l1.414 1.414M6.222 17.778l-1.414 1.414"
          ></path>
        </svg>
      </div>

      <!-- Title -->
      <h1
        id="title"
        class="text-3xl md:text-[2rem] font-extrabold leading-snug text-center
                 bg-clip-text text-transparent
                 bg-[linear-gradient(100deg,#b49c58,40%,#e6dca2,60%,#b49c58)]
                 drop-shadow-[0_0_20px_rgba(230,220,162,0.20)]"
      >
      </h1>

      <!-- Description -->
      <p
        id="desc"
        class="text-base md:text-lg text-zinc-300/90 text-center leading-relaxed"
      >
      </p>

      <!-- Countdown -->
      <div class="text-center">
        <div
          id="countdown"
          class="text-2xl md:text-[1.65rem] font-mono font-semibold
                    text-[#CFEAF3] tracking-wider digit-flicker"
        >
          00d : 00h : 00m : 00s
        </div>
        <div class="mt-1 text-xs text-zinc-400">
          <span
            class="inline-block align-middle w-2 h-2 rounded-full bg-[#0F7095] animate-ping-slow mr-1"
          ></span>
          <span id="statusNote" class="align-middle">Syncing estimateâ€¦</span>
        </div>
      </div>

      <!-- Progress -->
      <div class="space-y-2">
        <div class="flex items-center justify-between text-xs text-zinc-400">
          <span>Progress</span>
          <span id="progressLabel">0%</span>
        </div>

        <div
          class="relative w-full h-3 rounded-full overflow-hidden
                    bg-white/5 border border-white/10"
        >
          <!-- fill -->
          <div
            id="progressFill"
            class="absolute left-0 top-0 h-full w-0
                      rounded-full bg-[linear-gradient(90deg,#0F7095,40%,#39a3c1)]
                      shadow-[0_0_18px_#0F7095] transition-[width] duration-300 ease-out"
          >
          </div>
          <!-- shimmer at 100% -->
          <div
            id="progressShimmer"
            class="absolute inset-0 opacity-0 pointer-events-none"
          >
            <div
              class="absolute -left-1/4 top-0 h-full w-1/3
                        bg-[linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent)]
                        shimmer"
            >
            </div>
          </div>
        </div>
      </div>

      <!-- Links -->
      <div class="flex justify-center gap-3 pt-2">
        <a
          id="contactBtn"
          href="mailto:vin.simorangkir81@gmail.com"
          class="px-4 py-2 rounded-xl text-sm font-semibold
                 text-black bg-[linear-gradient(90deg,#0F7095,#39a3c1)]
                 shadow-[0_10px_28px_-12px_rgba(15,112,149,.55)]
                 hover:brightness-105 active:scale-[0.98]
                 transition"
        ></a>
        <a
          id="instagramBtn"
          href="https://instagram.com/vins.ch"
          class="px-4 py-2 rounded-xl text-sm font-medium
                 text-zinc-100 bg-white/5 border border-white/10
                 hover:bg-white/10 active:scale-[0.98]
                 transition"
        ></a>
      </div>
    </main>

    <!-- Styles -->
    <style is:global>
      /* speeds */
      @keyframes spin-slower {
        from {
          transform: rotate(0);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .spin-slower {
        animation: spin-slower 7s linear infinite;
      }

      @keyframes shimmerMove {
        0% {
          transform: translateX(-30%);
        }
        100% {
          transform: translateX(130%);
        }
      }
      .shimmer {
        animation: shimmerMove 2.2s ease-in-out infinite;
      }

      @keyframes pingSlow {
        0% {
          transform: scale(1);
          opacity: 0.8;
        }
        70% {
          transform: scale(1.7);
          opacity: 0;
        }
        100% {
          transform: scale(1.7);
          opacity: 0;
        }
      }
      .animate-ping-slow {
        animation: pingSlow 2.2s cubic-bezier(0.22, 1, 0.36, 1) infinite;
      }

      @keyframes digitFlicker {
        0%,
        100% {
          opacity: 0.97;
        }
        50% {
          opacity: 1;
        }
      }
      .digit-flicker {
        animation: digitFlicker 1.2s steps(2, end) infinite;
      }

      /* subtle hover lift for card */
      main:hover {
        box-shadow:
          0 0 46px -10px rgba(15, 112, 149, 0.55),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
        transform: translateY(-1px);
        transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
      }
    </style>

    <!-- Script -->
    <script>
      // Translations
      const translations = {
        id: {
          title: "ğŸš§ Situs Dalam Pemeliharaan",
          desc: "Kami sedang meningkatkan sistem agar pengalaman menjadi lebih baik.<br/>Silakan kembali lagi nanti ğŸ™",
          contact: "Hubungi Kami",
          instagram: "Instagram",
          done: "âœ… Pemeliharaan selesai!",
          syncing: "Menghitung estimasiâ€¦",
        },
        en: {
          title: "ğŸš§ Website Under Maintenance",
          desc: "Weâ€™re improving our system for a better experience.<br/>Please check back later ğŸ™",
          contact: "Contact Us",
          instagram: "Instagram",
          done: "âœ… Maintenance Completed!",
          syncing: "Syncing estimateâ€¦",
        },
        jp: {
          title: "ğŸš§ ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã§ã™",
          desc: "ã‚ˆã‚Šè‰¯ã„ä½“é¨“ã®ãŸã‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ”¹å–„ã—ã¦ã„ã¾ã™ã€‚<br/>ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ ğŸ™",
          contact: "ãŠå•ã„åˆã‚ã›",
          instagram: "ã‚¤ãƒ³ã‚¹ã‚¿ã‚°ãƒ©ãƒ ",
          done: "âœ… ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å®Œäº†ï¼",
          syncing: "æ¨å®šã‚’åŒæœŸä¸­â€¦",
        },
      };

      let currentLang = "en";
      const $ = (id) => document.getElementById(id);

      function setLang(lang) {
        currentLang = lang;
        $("title").innerHTML = translations[lang].title;
        $("desc").innerHTML = translations[lang].desc;
        $("contactBtn").innerText = translations[lang].contact;
        $("instagramBtn").innerText = translations[lang].instagram;
        $("statusNote").innerText = translations[lang].syncing;
      }

      // Countdown target
      // NOTE: If past, it will immediately show "done"
      const countdownEl = $("countdown");
      // Default to a rolling window: 48 hours from now to avoid stale dates
      const target = Date.now() + 48 * 60 * 60 * 1000;

      function updateCountdown() {
        const diff = target - Date.now();
        if (diff <= 0) {
          countdownEl.innerHTML = translations[currentLang].done;
          $("statusNote").innerText = "";
          // ensure progress 100 and shimmer on
          progressTo(100, true);
          return;
        }
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);
        countdownEl.innerHTML = `${String(d).padStart(2, "0")}d : ${String(h).padStart(2, "0")}h : ${String(m).padStart(2, "0")}m : ${String(s).padStart(2, "0")}s`;
      }

      // Progress realistic (one shot to 100, then shimmer)
      const fill = $("progressFill");
      const label = $("progressLabel");
      const shimmerWrap = $("progressShimmer");
      let current = 0;
      let finished = false;

      function progressTo(targetPercent, forceDone = false) {
        if (finished && !forceDone) return;
        current = Math.max(current, 0);
        const step = () => {
          if (current >= targetPercent || finished) {
            if (forceDone) {
              current = 100;
              fill.style.width = "100%";
              label.textContent = "100%";
              shimmerWrap.style.opacity = "1";
              finished = true;
            }
            return;
          }
          current += Math.max(1, Math.round((100 - current) * 0.04)); // ease out
          if (current > targetPercent) current = targetPercent;
          fill.style.width = current + "%";
          label.textContent = current + "%";
          if (current === 100) {
            shimmerWrap.style.opacity = "1";
            finished = true;
          } else {
            window.requestAnimationFrame(step);
          }
        };
        window.requestAnimationFrame(step);
      }

      // Simulated stages to feel "real"
      function stagedProgress() {
        setTimeout(() => progressTo(30), 600);
        setTimeout(() => progressTo(58), 1800);
        setTimeout(() => progressTo(76), 3200);
        setTimeout(() => progressTo(91), 5200);
        setTimeout(() => progressTo(100), 7700);
      }

      // Init
      setLang("en");
      updateCountdown();
      const timer = setInterval(updateCountdown, 1000);

      stagedProgress();

      document.querySelectorAll(".lang-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const lang = e.currentTarget.dataset.lang || "en";
          setLang(lang);
          updateCountdown();
        });
      });
    </script>
  </body>
</html>
